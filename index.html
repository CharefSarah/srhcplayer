<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>SRHC PLAYER</title>
    <meta name="theme-color" content="#0b0b0f" />
    <link rel="stylesheet" href="assets/css/player.css">
    <link rel="icon"
      href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0' y1='0' x2='1' y2='1'%3E%3Cstop offset='0' stop-color='%2322c55e'/%3E%3Cstop offset='1' stop-color='%2381e6d9'/%3E%3C/linearGradient%3E%3C/defs%3E%3Ccircle cx='32' cy='32' r='28' fill='url(%23g)'/%3E%3C/svg%3E" />
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
      :root{ --accent:#22c0c5; --accent-strong:#1687a3; --accent-soft:#7fe6b0; --on-accent:#111; }
      .legacy-seek{display:none;}
    </style>
  </head>
  <body>
    <div class="app">
      <div id="drawerMask" class="drawer-mask" hidden></div>

      <aside id="sidebar">
        <div class="brand">
          <span><!-- logo --></span>
          SRHC PLAYER
        </div>

        <div class="stack">
          <div class="section-title">Navigation</div>
          <button class="btn" id="btnFavorites"><span class="i"
              data-i="heart"></span> Favoris</button>
          <button class="btn" id="btnAlbums"><span class="i"
              data-i="library"></span> Albums</button>
          <button class="btn" id="btnPlaylists"><span class="i"
              data-i="disc-3"></span> Playlists</button>
          <!-- NEW -->
          <button class="btn" id="btnArtists"><span class="i"
              data-i="mic-2"></span> Artistes</button>
        </div>

        <div class="stack">
          <div class="section-title">Playlists</div>
          <div id="playlists" class="nav"></div>
          <button class="btn primary" id="btnNewPlaylist">
            <span class="i" data-i="circle-fading-plus"></span> Nouvelle
            playlist
          </button>
        </div>

        <div class="stack">
          <div class="section-title">Albums</div>
          <div id="sideAlbums" class="side-covers"></div>
        </div>

        <!-- NEW: Artistes dans l’aside, même style que les albums -->
        <div class="stack">
          <div class="section-title">Artistes</div>
          <div id="sideArtists" class="side-covers"></div>
        </div>

      </aside>

      <main id="main">
        <div class="topbar">
          <button class="btn icon" id="btnToggleAside" title="Menu"><span
              class="i" data-i="ellipsis-vertical"></span></button>
          <div class="search">
            <span class="i" data-i="search"></span>
            <input id="search" placeholder=" Rechercher…" />
          </div>
          <span id="currentScope" class="tag">Musique</span>
          <button class="btn" id="btnAddSong"><span class="i"
              data-i="circle-fading-plus"></span> Ajouter</button>
        </div>

        <!-- Vue Musique -->
        <div id="viewSongs">
          <div class="songsHeader" id="songsHeader">
            <div class="title">Musique</div>
            <div class="subtitle" id="songsSubtitle">0 titres</div>
            <button class="floatPlay" id="songsPlayBig" title="Lire"><span
                class="i" data-i="play"></span></button>
          </div>

          <div id="songListMobile" class="list-mobile"></div>

          <table class="songs" id="songTable">
            <thead id="songsThead">
              <!-- THEAD STANDARD UNIFIÉ -->
              <tr>
                <th>#</th>
                <th>Titre</th>
                <th>Artiste</th>
                <th>Album</th>
                <th>Durée</th>
                <th><span class="i" data-i="heart"></span></th>
                <th>⋯</th>
              </tr>
            </thead>
            <tbody id="songTbody"></tbody>
          </table>
        </div>

        <!-- Grille d'albums -->
        <div id="viewAlbums" style="display:none">
          <div class="grid" id="albumGrid"></div>
        </div>

        <!-- Grille de playlists -->
        <div id="viewPlaylists" style="display:none">
          <div class="grid" id="playlistGrid"></div>
        </div>

        <!-- NEW: Grille d’artistes -->
        <div id="viewArtists" style="display:none">
          <div class="grid" id="artistGrid"></div>
        </div>

        <!-- Vue Album -->
        <div id="albumView" style="display:none">
          <div class="hero" id="albumHero">
            <img id="albumCover" class="cover" alt>
            <div class="meta">
              <div class="sub">Album</div>
              <div class="title" id="albumTitle">—</div>
              <div class="sub" id="albumSub">—</div>
              <div class="actions">
                <button class="btn primary big" id="albumPlay"><span class="i"
                    data-i="play"></span> Lire</button>
                <button class="btn" id="albumShuffle"><span class="i"
                    data-i="shuffle"></span> Aléatoire</button>
              </div>
            </div>
          </div>

          <div class="table" style="margin-top:10px">
            <table class="songs">
              <!-- THEAD STANDARD UNIFIÉ -->
              <thead id="albumThead">
                <tr>
                  <th>#</th>
                  <th>Titre</th>
                  <th>Artiste</th>
                  <th>Album</th>
                  <th>Durée</th>
                  <th><span class="i" data-i="heart"></span></th>
                  <th>⋯</th>
                </tr>
              </thead>
              <tbody id="albumTbody"></tbody>
            </table>
          </div>
        </div>

        <!-- Vue Playlist -->
        <div id="playlistView" style="display:none">
          <div class="hero" id="playlistHero">
            <img id="playlistCover" class="cover" alt>
            <div class="meta">
              <div class="sub">Playlist</div>
              <div class="title" id="playlistTitle">—</div>
              <div class="sub" id="playlistSub">—</div>
              <div class="actions">
                <button class="btn primary big" id="playlistPlay"><span
                    class="i" data-i="play"></span> Lire</button>
                <button class="btn" id="playlistShuffle"><span class="i"
                    data-i="shuffle"></span> Aléatoire</button>
              </div>
            </div>
          </div>

          <div class="table" style="margin-top:10px">
            <table class="songs">
              <!-- THEAD STANDARD UNIFIÉ -->
              <thead id="playlistThead">
                <tr>
                  <th>#</th>
                  <th>Titre</th>
                  <th>Artiste</th>
                  <th>Album</th>
                  <th>Durée</th>
                  <th><span class="i" data-i="heart"></span></th>
                  <th>⋯</th>
                </tr>
              </thead>
              <tbody id="playlistTbody"></tbody>
            </table>
          </div>
        </div>
        <div id="bulkBar" hidden>
          <button class="btn" id="bulkSelectAll">
            <span class="i" data-i="check-square"></span> Tout sélectionner
          </button>
          <button class="btn" id="bulkAddToPlaylists">
            <span class="i" data-i="plus"></span> Ajouter aux playlists
          </button>
          <button class="btn danger" id="bulkDelete">
            <span class="i" data-i="trash-2"></span> Supprimer
          </button>
          <button class="btn" id="bulkCancel">
            <span class="i" data-i="x"></span> Annuler
          </button>
        </div>

        <!-- NEW: Vue Artiste -->
        <div id="artistView" style="display:none">
          <div class="hero" id="artistHero">
            <img id="artistCover" class="cover" alt>
            <div class="meta">
              <div class="sub">Artiste</div>
              <div class="title" id="artistTitle">—</div>
              <div class="sub" id="artistSub">—</div>
              <div class="actions">
                <button class="btn primary big" id="artistPlay"><span class="i"
                    data-i="play"></span> Lire</button>
                <button class="btn" id="artistShuffle"><span class="i"
                    data-i="shuffle"></span> Aléatoire</button>
              </div>
            </div>
          </div>

          <div class="table" style="margin-top:10px">
            <table class="songs">
              <!-- THEAD STANDARD UNIFIÉ -->
              <thead id="artistThead">
                <tr>
                  <th>#</th>
                  <th>Titre</th>
                  <th>Artiste</th>
                  <th>Album</th>
                  <th>Durée</th>
                  <th><span class="i" data-i="heart"></span></th>
                  <th>⋯</th>
                </tr>
              </thead>
              <tbody id="artistTbody"></tbody>
            </table>
          </div>

          <div style="margin-top:24px">
            <h3 style="margin:0 0 8px 0">Albums de l’artiste</h3>
            <div id="artistAlbumsGrid" class="grid"></div>
          </div>
        </div>
      </main>

    </div>
    <footer class="player">
      <!-- gauche -->
      <div class="now">
        <img id="nowCover" alt="cover" />
        <div class="meta">
          <div class="title" id="nowTitle">—</div>
          <div class="artist" id="nowArtist">—</div>
        </div>
      </div>

      <!-- centre -->
      <div class="center">
        <div class="controls">
          <button class="btn icon" id="btnShuffle"><span class="i"
              data-i="shuffle"></span></button>
          <button class="btn icon" id="btnPrev"><span class="i"
              data-i="step-back"></span></button>
          <button class="btn icon big" id="btnPlay"><span class="i"
              data-i="play"></span></button>
          <button class="btn icon" id="btnNext"><span class="i"
              data-i="step-forward"></span></button>
          <button class="btn icon" id="btnRepeat"><span class="i"
              data-i="repeat-2"></span></button>
        </div>
        <div class="timeline">
          <span id="cur">0:00</span>
          <div class="progress" id="seekBar" data-variant="pill" role="slider"
            aria-label="Position de lecture" aria-valuemin="0"
            aria-valuemax="1000" aria-valuenow="0">

          </div>
          <span id="dur">0:00</span>
        </div>
      </div>

      <!-- droite -->
      <div class="right">
        <button class="btn icon" id="btnLike"><span class="i"
            data-i="heart"></span></button>
        <div class="vol-wrap">
          <span class="i" data-i="volume-2"></span>
          <input id="volume" type="range" min="0" max="1" step="0.01"
            value="1" class="range vol" />
        </div>
        <button class="btn icon" id="btnExpand"><span class="i"
            data-i="maximize-2"></span></button>
      </div>
    </footer>

    <!-- Dialog: chanson -->
    <dialog id="songDialog">
      <header><strong>Ajouter / Modifier une chanson</strong><button class="btn"
          onclick="songDialog.close()">✖</button></header>
      <div class="body">
        <div class="row2">
          <div class="cover-preview"><img id="songCoverPreview" alt></div>
          <div style="display:grid;gap:10px">
            <label class="label">Titre<input type="text" id="songTitle"
                class="input" placeholder="Nom de la chanson"></label>
            <label class="label">Artiste<input type="text" id="songArtist"
                class="input" placeholder="Nom de l'artiste"></label>
            <label class="label">Album<input type="text" id="songAlbum"
                class="input" placeholder="Nom de l'album"></label>
            <div style="display:flex;gap:8px;flex-wrap:wrap">
              <label class="btn">Cover <input type="file" id="songCover"
                  accept="image/*" style="display:none"></label>
              <label class="btn">Audio <input type="file" id="songFile"
                  accept="audio/*" style="display:none"></label>
            </div>
            <button class="btn primary" id="saveSong">Enregistrer</button>
          </div>
        </div>
      </div>
    </dialog>

    <!-- Dialog: créer/éditer playlist -->
    <dialog id="plDialog">
      <header><strong id="plDialogTitle">Nouvelle playlist</strong><button
          class="btn" onclick="plDialog.close()">✖</button></header>
      <div class="body">
        <div class="row2">
          <div class="cover-preview"><img id="plCoverPreview" alt /></div>
          <div>
            <label class="label">Nom de la playlist</label>
            <input id="plName" class="input" placeholder="Ma playlist" />
            <div style="display:flex;gap:8px;margin-top:8px;flex-wrap:wrap">
              <label class="btn">Choisir une image <input id="plCoverInput"
                  type="file" accept="image/*" style="display:none" /></label>
              <button class="btn primary" id="plSave">Enregistrer</button>
            </div>
          </div>
        </div>
      </div>
    </dialog>

    <!-- Dialog: ajouter à une playlist -->
    <dialog id="plAddDialog">
      <header><strong>Ajouter à une playlist</strong><button class="btn"
          onclick="plAddDialog.close()">✖</button></header>
      <div class="body" id="plAddBody" style="display:grid;gap:10px"></div>
      <div class="body"
        style="border-top:1px solid var(--border);display:flex;justify-content:flex-end">
        <button class="btn primary" id="plAddConfirm">Ajouter</button>
      </div>
    </dialog>

    <!-- Dialog: now playing (mobile) -->
    <dialog id="nowDialog">
      <div class="np-wrap">
        <header
          style="display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-bottom:1px solid var(--border)">
          <button class="btn icon" onclick="nowDialog.close()"><span><svg
                xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                viewBox="0 0 24 24" fill="none" stroke="currentColor"
                stroke-width="1.5" stroke-linecap="round"
                stroke-linejoin="round"
                class="lucide lucide-chevron-down-icon lucide-chevron-down"><path
                  d="m6 9 6 6 6-6" /></svg></span></button>
          <strong>En cours de lecture</strong><span></span>
        </header>
        <div style="display:grid;place-items:center;padding:16px;gap:12px">
          <img id="npCover" class="np-cover" alt>
          <div class="np-meta"><div id="npTitle" class="np-title">—</div><div
              id="npArtist" class="np-artist">—</div></div>
        </div>
        <div class="np-bottom" style="padding:0 14px 14px">

          <!-- NEW: waveform/progress plein écran -->
          <div class="timeline" style="margin:0 6px">
            <span id="npCur">0:00</span>

            <!-- ici wave par défaut -->
            <div class="progress" id="npSeekBar" data-variant="wave"
              role="slider"
              aria-label="Position de lecture (plein écran)" aria-valuemin="0"
              aria-valuemax="1000" aria-valuenow="0">
              <div class="knob"></div>
              <!-- les 40 barres seront générées par JS -->
            </div>

            <!-- ancien input caché (fallback) -->
            <input id="npSeek" type="range" min="0" max="1000" value="0"
              class="range legacy-seek" />
            <span id="npDur">0:00</span>
          </div>

          <div class="np-controls">
            <button class="btn icon" id="npShuffle"><span><svg
                  xmlns="http://www.w3.org/2000/svg" width="14" height="14"
                  viewBox="0 0 24 24" fill="none" stroke="currentColor"
                  stroke-width="1.5" stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-shuffle-icon lucide-shuffle"><path
                    d="m18 14 4 4-4 4" /><path d="m18 2 4 4-4 4" /><path
                    d="M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22" /><path
                    d="M2 6h1.972a4 4 0 0 1 3.6 2.2" /><path
                    d="M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45" /></svg></span></button>
            <button class="btn icon" id="npPrev"><span><svg
                  xmlns="http://www.w3.org/2000/svg" width="14" height="14"
                  viewBox="0 0 24 24" fill="none" stroke="currentColor"
                  stroke-width="1.5" stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-step-back-icon lucide-step-back"><path
                    d="M13.971 4.285A2 2 0 0 1 17 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z" /><path
                    d="M21 20V4" /></svg></span></button>
            <button class="btn icon big" id="npPlay"><span><svg
                  xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                  viewBox="0 0 24 24" fill="none" stroke="currentColor"
                  stroke-width="1.5" stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-play-icon lucide-play"><path
                    d="M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z" /></svg></span></button>
            <button class="btn icon" id="npNext"><span><svg
                  xmlns="http://www.w3.org/2000/svg" width="14" height="14"
                  viewBox="0 0 24 24" fill="none" stroke="currentColor"
                  stroke-width="1.5" stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-step-forward-icon lucide-step-forward"><path
                    d="M10.029 4.285A2 2 0 0 0 7 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z" /><path
                    d="M3 4v16" /></svg></span></button>
            <button class="btn icon" id="npRepeat"><span><svg
                  xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                  viewBox="0 0 24 24" fill="none" stroke="currentColor"
                  stroke-width="1.5" stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-repeat2-icon lucide-repeat-2"><path
                    d="m2 9 3-3 3 3" /><path
                    d="M13 18H7a2 2 0 0 1-2-2V6" /><path
                    d="m22 15-3 3-3-3" /><path
                    d="M11 6h6a2 2 0 0 1 2 2v10" /></svg></span></button>
          </div>
        </div>
      </div>
    </dialog>

    <script src="assets/js/script.js"></script>
  </body>
</html>
